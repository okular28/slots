(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();const i={reelAmount:5,symbolAmount:9,iterationCount:5,reelLength:50,iterationTime:280,animationTime:5*280+280*.5,winningSymbol:"",winningSymbolPrice:0,winningCombination:[],winningCombinationMultiplier:1,startIndex:6,reelIndex:0,symbolConfig:[{id:0,name:"Diamond",price:25e3},{id:1,name:"Emerald",price:2e4},{id:2,name:"Alexandrite",price:15e3},{id:3,name:"Rubin",price:1e4},{id:4,name:"Opal",price:5e3},{id:5,name:"Sapphire",price:3e3},{id:6,name:"Tanzanite",price:1e3},{id:7,name:"Topaz",price:500},{id:8,name:"Amethyst",price:100}],reelSet:[],initialReelSet:[]},u={button:document.getElementById("animationButton"),cashSpan:document.getElementById("currentCash"),winSpan:document.getElementById("lastWin")},m={currentCash:25e3,bid:1e3,lastWin:0};function w(e,n){const t=parseFloat((e*n).toFixed(2));b(t,!1),m.lastWin=t,i.winningSymbolPrice=0,i.winningCombinationMultiplier=1}function b(e,n){n?m.currentCash-=e:m.currentCash+=e}function h(){u.cashSpan.textContent=`Your money: ${m.currentCash} $`,u.winSpan.textContent=`Last spin winnings: ${m.lastWin} $`}function x(){document.querySelectorAll(`.${i.winningSymbol}`).forEach(n=>{n.animate([{backgroundColor:"#cefff5"},{backgroundColor:"#f2a4f0"},{backgroundColor:"#cefff5"},{backgroundColor:"#f2a4f0"},{backgroundColor:"#cefff5"}],{duration:1e3,easing:"ease-in-out"}).play(),L(u.button,1e3)}),h()}function P(e,n){e.disabled=!e.disabled,setTimeout(()=>{e.disabled=!e.disabled,x()},n)}function L(e,n){e.disabled=!e.disabled,setTimeout(()=>{e.disabled=!e.disabled},n)}function A(){i.reelSet=i.initialReelSet.map(n=>[...n]);let e=i.reelIndex+i.startIndex;i.reelIndex+i.startIndex>i.reelLength&&(e=6),i.reelSet.forEach((n,t)=>{const o=i.winningCombination[t];i.reelSet[t].splice(e,3,o[2],o[1],o[0])}),i.winningCombination=[],i.winningSymbolPrice!=0?w(i.winningSymbolPrice,i.winningCombinationMultiplier):m.lastWin=0}const g=[[0,0,0],[0,0,0,0],[0,0,0,0,0],[0,1,1,1,0],[0,1,0,1,0],[0,1,2,1,0],[1,0,0,0,1],[1,0,1,0,1],[2,1,0,1,2]],S=[{id:0,maxStartingPointX:2,maxStartingPointY:2,multiplier:1.2},{id:1,maxStartingPointX:1,maxStartingPointY:2,multiplier:1.5},{id:2,maxStartingPointX:0,maxStartingPointY:2,multiplier:2},{id:3,maxStartingPointX:0,maxStartingPointY:1,multiplier:2.2},{id:4,maxStartingPointX:0,maxStartingPointY:1,multiplier:3},{id:5,maxStartingPointX:0,maxStartingPointY:0,multiplier:5},{id:6,maxStartingPointX:0,maxStartingPointY:1,multiplier:2.2},{id:7,maxStartingPointX:0,maxStartingPointY:1,multiplier:3},{id:8,maxStartingPointX:0,maxStartingPointY:0,multiplier:5}];function M(){const e=I(),n=O(e),t=E(e);let o=[],r=[];for(let l=0;l<i.reelAmount;l++){const a=Y(e,t);for(let c=0;c<3;c++){let d=Math.floor(Math.random()*a.length);for(;r[c]===a[d];)d=Math.floor(Math.random()*a.length);o.push(a[d]),a.splice(d,1),e!=-1&&v(t,l,c,n,e,o)}i.winningCombination.push(o),r=o.map(c=>c),o=[]}e!=-1&&(i.winningSymbolPrice=i.symbolConfig[t].price,i.winningCombinationMultiplier=S[e].multiplier),A()}function I(){const e=Math.floor(Math.random()*231);switch(!0){case e>=225:return 8;case e>=210:return 7;case e>=195:return 6;case e>=190:return 5;case e>=180:return 4;case e>=170:return 3;case e>=155:return 2;case e>=140:return 1;case e>=120:return 0;default:return-1}}function E(e){const n=Math.floor(Math.random()*i.symbolAmount);return e!=-1?i.winningSymbol=i.symbolConfig[n].name:i.winningSymbol="none",n}function O(e){if(e==-1)return[];const n=S[e];let t,o;return Object.values(n)[1]==0?t=0:t=Math.floor(Math.random()*(Object.values(n)[1]+1)),Object.values(n)[2]==0?o=0:o=Math.floor(Math.random()*(Object.values(n)[2]+1)),[t,o]}function Y(e,n){return e!=-1?i.symbolConfig.map(t=>t.id).filter(t=>t!==n):i.symbolConfig.map(t=>t.id)}function v(e,n,t,o,r,l){const[a,c]=o;if(n>=a&&n<a+g[r].length){const d=n-a,f=g[r][d]+c;t===f&&f<l.length&&(l[f]=e)}}const y=u.button;let C=document.querySelectorAll(".reel");function R(){m.currentCash>1e3?(y.addEventListener("click",X),C=document.querySelectorAll(".reel")):alert("You ran out of money")}function X(){b(m.bid,!0),h(),P(y,i.animationTime),M(),C.forEach((e,n)=>{let t=1;const o=e.animate([{top:"0px"},{top:"300px"}],{delay:n*30,duration:i.iterationTime,easing:"linear"});o.onfinish=()=>{t++,B(e,n),t<i.iterationCount&&(t==2&&o.effect!=null&&o.effect.updateTiming({delay:0}),o.play())}})}const s=i;let p=0;const j=()=>{const e=document.getElementsByClassName("machineContainer")[0];for(let n=0;n<s.reelAmount;n++){const t=document.createElement("div");t.classList.add("reel");for(let o=0;o<s.symbolAmount;o++){const r=document.createElement("div");r.classList.add("row"),t.appendChild(r)}e.appendChild(t)}R()},B=(e,n)=>{if(p++,s.reelIndex+3<s.reelLength){let t=0;for(let o=0;o<s.symbolAmount/3;o++){const r=document.createElement("div");r.classList.add("row");const l=s.symbolConfig.find(a=>a.id===s.reelSet[n][s.reelIndex+t]);l&&!r.classList.contains(l.name)&&r.classList.add(l.name),e.lastChild&&e.removeChild(e.lastChild),e.insertBefore(r,e.firstChild),t++}p%5==0&&(s.reelIndex=s.reelIndex+3)}else s.reelIndex=0};function T(){for(let e=0;e<i.reelAmount;e++){const n=[];for(let t=0;t<i.reelLength;t++)n.push(Math.floor(Math.random()*i.symbolAmount));i.reelSet.push(n),i.initialReelSet.push(n)}}const W=e=>{for(let n=e.length-1;n>0;n--){const t=Math.floor(Math.random()*(n+1));[e[n],e[t]]=[e[t],e[n]]}return e};function q(){const e=i.symbolConfig.map(t=>t.name);document.querySelectorAll(".reel").forEach(t=>{const o=W(e);t.querySelectorAll(".row").forEach((l,a)=>{l.classList.add(o[a])})})}j();T();q();
